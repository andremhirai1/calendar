class Calendar{constructor(e,t={}){this.options=t,this.options.url=t.url||"",this.options.parameters={},this.options.parameters={month:t.parameters.month||"month",year:t.parameters.year||"year"},this.options.weekdays=t.weekdays||"narrow",this.options.modal=!!t.modal&&this.renderModal(),this.calendar=document.querySelector(e),this.currentMonth=(new Date).getMonth(),this.currentYear=(new Date).getFullYear(),this.renderHeader(),this.renderBody(),this.renderCalendar(),this.changeSpacing(),this.attachListeners=this.attachListeners.bind(this),this.changeSpacing=this.changeSpacing.bind(this),this.attachListeners(),this.events=[]}renderCalendar(){const e=new Date(this.currentYear,this.currentMonth,0).getDay()+1,t=new Date(this.currentYear,this.currentMonth+1,0).getDay(),n=new Date(this.currentYear,this.currentMonth,0).getDate(),r=new Date(this.currentYear,this.currentMonth+1,0).getDate(),s=7-t;let a="";this.headerMonth.innerText=`${this.months[this.currentMonth]}/${this.currentYear}`,this.days.innerHTML="";for(let t=e;t>0;t--)a+=`<div class="prev-date">${n-t+1}</div>`;for(let e=1;e<=r;e++)e===(new Date).getDate()&&this.currentMonth===(new Date).getMonth()&&this.currentYear===(new Date).getFullYear()?a+=`<div id="date_${e}" class="today">${e}</div>`:a+=`<div id="date_${e}">${e}</div>`;for(let e=1;e<s;e++)a+=`<div class="next-date">${e}</div>`;this.days.innerHTML=a,this.events?.length>0&&checkItemsWithEvents(r),this.changeSpacing()}renderHeader(){const e=document.createElement("div");e.classList.add("calendar-header"),this.renderPrevButton(e),this.renderCalendarMonth(e),this.renderNextButton(e),this.calendar.appendChild(e)}renderPrevButton(e){const t=this,n=document.createElement("button");n.innerHTML+='<svg width="5" height="10" viewBox="0 0 5 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M4.37506 8.89628L0.937561 4.83364L4.37506 0.770996" stroke="black" stroke-width="1.09292" />\n                                  </svg>',n.setAttribute("id","calendar-prev-button"),n.addEventListener("click",(()=>t.onClickHandler("prev"))),e.appendChild(n)}renderNextButton(e){const t=this,n=document.createElement("button");n.innerHTML+='<svg width="5" height="10" viewBox="0 0 5 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M0.624931 8.89628L4.06243 4.83364L0.624931 0.770996" stroke="black" stroke-width="1.09292" />\n                                  </svg>',n.setAttribute("id","calendar-next-button"),n.addEventListener("click",(()=>t.onClickHandler("next"))),e.appendChild(n)}async onClickHandler(e){if("prev"===e?(this.currentYear=0==this.currentMonth?this.currentYear-1:this.currentYear,this.currentMonth=0==this.currentMonth?11:this.currentMonth-1):"next"===e&&(this.currentYear=11==this.currentMonth?this.currentYear+1:this.currentYear,this.currentMonth=11==this.currentMonth?0:this.currentMonth+1),this.options.url){const e=await fetch(`${this.options.url}?${this.options.parameters.month}=${this.currentMonth+1}&${this.options.parameters.year}=${this.currentYear}`);this.events=e}this.renderCalendar()}renderCalendarMonth(e){this.months=[];for(let e=0;e<12;e++)this.months=[...this.months,new Date(2e3,e,1).toLocaleDateString("default",{month:"long"})];const t=document.createElement("span");t.innerHTML+=this.months[this.currentMonth],e.appendChild(t),this.headerMonth=t}renderBody(){const e=document.createElement("div");e.classList.add("calendar-body"),this.renderWeekDays(e),this.calendar.appendChild(e),this.body=e}renderWeekDays(e){const t=document.createElement("div"),n=document.createElement("div");this.weekdays=[],t.classList.add("calendar-weekdays"),n.classList.add("calendar-days");for(let e=0;e<7;e++)this.weekdays=[...this.weekdays,new Date(2002,3,e).toLocaleDateString("default",{weekday:this.options.weekdays})];for(const e of this.weekdays)t.innerHTML+=`<div>${e}</div>`;e.appendChild(t),e.appendChild(n),this.days=n}changeSpacing(){const e=this,t=this.calendar.querySelectorAll(".calendar-weekdays div"),n=this.calendar.querySelectorAll(".calendar-days div");t.forEach((function(t){t.style.minWidth=e.calendar.offsetWidth/7-10+"px"})),n.forEach((function(t){t.style.minWidth=e.calendar.offsetWidth/7-10+"px"}))}attachListeners(){window.addEventListener("resize",this.changeSpacing)}checkItemsWithEvents(e){for(let t=1;t<=e;t++){if(itensEvents.find((e=>{if(e.day==t&&e.month==currentMonth+1&&e.year==currentYear)return e}))){let e=document.querySelector(`#date_${t}`);e.classList.contains("today")||e.classList.add("next-event"),e.style.cursor="pointer"}}}renderModal(){const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");e.classList.add("calendar-modal"),e.appendChild(t),e.appendChild(n)}}